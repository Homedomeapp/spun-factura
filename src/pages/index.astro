---
import Base from '../layouts/Base.astro';

// Schema.org para la landing
const orgSchema = {
  "@context": "https://schema.org",
  "@type": "SoftwareApplication",
  "name": "SPUN Factura",
  "applicationCategory": "BusinessApplication",
  "operatingSystem": "Web",
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "EUR"
  },
  "provider": {
    "@type": "Organization",
    "name": "Homedome Ib√©rica S.L.",
    "url": "https://spun.es"
  }
};
---

<Base 
  title="SPUN Factura | Facturaci√≥n para Construcci√≥n y Reformas"
  description="Facturaci√≥n electr√≥nica para profesionales de construcci√≥n y reformas. Dise√±ado para cumplir Verifactu 2027 (RD 1007/2023). IVA reducido preconfigurado."
>
  <script type="application/ld+json" set:html={JSON.stringify(orgSchema)} />

  <!-- Hero Section -->
  <section class="hero">
    <div class="container">
      <div class="hero-grid">
        <div class="hero-content">
          <div class="badge-verifactu">
            <strong>Preparado para Verifactu 2027</strong>
            <span>Cumplimiento RD 1007/2023</span>
          </div>
          
          <h1>Facturaci√≥n que entiende tu obra</h1>
          
          <p class="hero-subtitle">
            Facturaci√≥n pensada para construcci√≥n y reformas. Preparado para cumplir Verifactu desde el d√≠a 1, con IVA reducido preconfigurado y dise√±o espec√≠fico para el sector.
          </p>

          <p class="hero-pain">
            Sin carreras de √∫ltima hora por Verifactu. Sin l√≠os configurando el IVA del 10%. Sin software gen√©rico que no entiende tu trabajo.
          </p>
          
          <div class="hero-features">
            <div class="hero-feature">
              <span class="hero-feature-icon">‚úì</span>
              Cumplimiento Verifactu
            </div>
            <div class="hero-feature">
              <span class="hero-feature-icon">‚úì</span>
              Pensado para obra
            </div>
            <div class="hero-feature">
              <span class="hero-feature-icon">‚úì</span>
              IVA 10% configurado
            </div>
          </div>
          
          <a href="#form" class="btn btn-primary btn-lg">
            Reservar mi plaza gratis
          </a>
          <p class="hero-note">Sin compromiso ¬∑ Te avisamos del lanzamiento</p>
        </div>
        
        <div class="hero-images">
          <div class="photo-grid">
            <img src="/images/professional-construction-worker-using-a-drill-2024-10-11-02-22-22-utc.jpg" alt="Profesional de construcci√≥n" class="photo-main" loading="eager">
            <img src="/images/happy-woman-portrait-and-professional-engineer-in-2023-11-27-05-27-52-utc.jpg" alt="Ingeniera profesional" class="photo-secondary" loading="lazy">
            <img src="/images/plumber-man-fixing-kitchen-sink-2023-11-27-04-58-03-utc.jpg" alt="Fontanero profesional" class="photo-secondary" loading="lazy">
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Features Section -->
  <section class="features">
    <div class="container">
      <h2 class="section-title">¬øPor qu√© SPUN Factura?</h2>
      <p class="section-subtitle">Dise√±ado espec√≠ficamente para profesionales de construcci√≥n y reformas</p>
      
      <div class="features-grid">
        <div class="feature-card">
          <span class="feature-badge mvp">Lanzamiento</span>
          <div class="feature-icon">‚úÖ</div>
          <h3>Preparado para Verifactu</h3>
          <p>Dise√±ado para cumplir los requisitos del RD 1007/2023: registro con hash, QR de verificaci√≥n, y env√≠o a la AEAT.</p>
        </div>
        
        <div class="feature-card">
          <span class="feature-badge mvp">Lanzamiento</span>
          <div class="feature-icon">üè†</div>
          <h3>IVA reducido configurado</h3>
          <p>El 10% para reformas de vivienda habitual viene preconfigurado. T√∫ solo seleccionas el tipo de trabajo.</p>
        </div>
        
        <div class="feature-card">
          <span class="feature-badge mvp">Lanzamiento</span>
          <div class="feature-icon">üì±</div>
          <h3>Factura desde el m√≥vil</h3>
          <p>Genera y env√≠a facturas desde cualquier sitio. Sin esperar a llegar a casa.</p>
        </div>
        
        <div class="feature-card">
          <span class="feature-badge roadmap">Roadmap 2026</span>
          <div class="feature-icon">üìã</div>
          <h3>Presupuesto ‚Üí Factura</h3>
          <p>Convierte presupuestos en facturas con un click. Con partidas de obra, mediciones y desglose.</p>
        </div>
        
        <div class="feature-card">
          <span class="feature-badge roadmap">Roadmap 2026</span>
          <div class="feature-icon">üì∏</div>
          <h3>Adjunta planos y fotos</h3>
          <p>A√±ade im√°genes del antes/despu√©s, planos o documentaci√≥n t√©cnica en la factura.</p>
        </div>
        
        <div class="feature-card">
          <span class="feature-badge roadmap">Roadmap 2026</span>
          <div class="feature-icon">üìä</div>
          <h3>Dashboard por proyecto</h3>
          <p>Controla cu√°nto has facturado por obra, cliente o tipo de trabajo. Tu IVA trimestral de un vistazo.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- Form Section -->
  <section class="form-section" id="form">
    <div class="container">
      <div class="form-wrapper">
        <div class="form-header">
          <h2>Reserva tu plaza</h2>
          <p>S√© de los primeros en probar SPUN Factura. Sin coste hasta el lanzamiento.</p>
        </div>
        
        <form id="registro-form" class="registration-form">
          <div class="form-grid">
            <div class="form-group">
              <label for="nombre">Nombre *</label>
              <input type="text" id="nombre" name="nombre" required placeholder="Tu nombre">
            </div>
            
            <div class="form-group">
              <label for="email">Email *</label>
              <input type="email" id="email" name="email" required placeholder="tu@email.com">
            </div>
            
            <div class="form-group">
              <label for="telefono">Tel√©fono</label>
              <input type="tel" id="telefono" name="telefono" placeholder="600 000 000">
            </div>
            
            <div class="form-group">
              <label for="codigo_postal">C√≥digo postal *</label>
              <input type="text" id="codigo_postal" name="codigo_postal" required placeholder="28001" maxlength="5">
            </div>
            
            <div class="form-group full-width">
              <label for="categoria">¬øA qu√© te dedicas? *</label>
              <select id="categoria" name="categoria" required>
                <option value="">Selecciona tu actividad principal</option>
                <option value="Direcci√≥n y gesti√≥n t√©cnica">Direcci√≥n y gesti√≥n t√©cnica</option>
                <option value="Reformas integrales, estructura y obra mayor">Reformas integrales, estructura y obra mayor</option>
                <option value="Alba√±iler√≠a y obra base">Alba√±iler√≠a y obra base</option>
                <option value="Envolvente y rehabilitaci√≥n de edificios">Envolvente y rehabilitaci√≥n de edificios</option>
                <option value="Instalaciones el√©ctricas y dom√≥tica">Instalaciones el√©ctricas y dom√≥tica</option>
                <option value="Fontaner√≠a, saneamiento y gas">Fontaner√≠a, saneamiento y gas</option>
                <option value="Climatizaci√≥n, calefacci√≥n y aerotermia">Climatizaci√≥n, calefacci√≥n y aerotermia</option>
                <option value="Energ√≠as renovables y servicios energ√©ticos">Energ√≠as renovables y servicios energ√©ticos</option>
                <option value="Carpinter√≠a, cerramientos y vidrio">Carpinter√≠a, cerramientos y vidrio</option>
                <option value="Acabados, pintura y decoraci√≥n">Acabados, pintura y decoraci√≥n</option>
                <option value="Artesan√≠a y acabados premium">Artesan√≠a y acabados premium</option>
                <option value="Exterior, paisajismo y jard√≠n">Exterior, paisajismo y jard√≠n</option>
                <option value="Alquiler de maquinaria y equipos">Alquiler de maquinaria y equipos</option>
                <option value="Mantenimiento y servicios auxiliares">Mantenimiento y servicios auxiliares</option>
              </select>
            </div>
          </div>
          
          <div class="form-group checkbox-group">
            <label class="checkbox-label">
              <input type="checkbox" name="acepta_privacidad" required>
              <span>Acepto la <a href="/privacidad" target="_blank">pol√≠tica de privacidad</a></span>
            </label>
          </div>
          
          <button type="submit" class="btn btn-primary btn-lg full-width">
            Reservar mi plaza gratis
          </button>
        </form>
        
        <div class="form-success" id="form-success" style="display: none;">
          <div class="success-icon">‚úÖ</div>
          <h3>¬°Gracias por registrarte!</h3>
          <p>Te avisaremos cuando SPUN Factura est√© listo para ti.</p>
        </div>
      </div>
    </div>
  </section>

  <!-- FAQ Section -->
  <section class="faq-section">
    <div class="container-narrow">
      <h2 class="section-title">Preguntas frecuentes</h2>
      
      <div class="faq-list">
        <div class="faq-item">
          <h4>¬øCu√°nto cuesta?</h4>
          <p>Durante la fase de lanzamiento, SPUN Factura ser√° gratuito para los primeros usuarios. Despu√©s habr√° un plan de pago asequible para aut√≥nomos y peque√±as empresas.</p>
        </div>
        
        <div class="faq-item">
          <h4>¬øYa cumpl√≠s con el RD 1007/2023?</h4>
          <p>Estamos desarrollando SPUN Factura para cumplir los requisitos t√©cnicos del Reglamento Verifactu desde el principio: registro de facturaci√≥n con hash encadenado, c√≥digo QR, y capacidad de env√≠o a la AEAT. Te mantendremos informado del avance.</p>
        </div>
        
        <div class="faq-item">
          <h4>¬øCu√°ndo estar√° disponible?</h4>
          <p>Estamos en desarrollo activo. Los primeros usuarios tendr√°n acceso en 2025. Si te registras ahora, ser√°s de los primeros en probarlo.</p>
        </div>
        
        <div class="faq-item">
          <h4>¬øPuedo importar mis facturas actuales?</h4>
          <p>S√≠, estamos trabajando en herramientas de importaci√≥n desde Excel y otros programas de facturaci√≥n.</p>
        </div>
      </div>
    </div>
  </section>
</Base>

<style>
  /* Hero */
  .hero {
    padding: 140px 0 80px;
    background: linear-gradient(180deg, var(--color-primary-bg) 0%, white 100%);
  }

  .hero-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 60px;
    align-items: center;
  }

  .badge-verifactu {
    display: inline-flex;
    flex-direction: column;
    background: white;
    border: 1px solid var(--color-primary);
    border-radius: 8px;
    padding: 8px 16px;
    margin-bottom: 24px;
  }

  .badge-verifactu strong {
    color: var(--color-primary-dark);
    font-size: 0.875rem;
  }

  .badge-verifactu span {
    color: var(--color-text-muted);
    font-size: 0.75rem;
  }

  .hero h1 {
    font-size: 3rem;
    line-height: 1.1;
    margin-bottom: 20px;
  }

  .hero-subtitle {
    font-size: 1.125rem;
    color: var(--color-text-muted);
    margin-bottom: 16px;
  }

  .hero-pain {
    font-size: 1rem;
    color: var(--color-text-muted);
    margin-bottom: 24px;
    padding-left: 16px;
    border-left: 3px solid var(--color-primary);
  }

  .hero-features {
    display: flex;
    gap: 20px;
    margin-bottom: 32px;
  }

  .hero-feature {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 0.9375rem;
    color: var(--color-text);
  }

  .hero-feature-icon {
    color: var(--color-primary);
    font-weight: bold;
  }

  .hero-note {
    font-size: 0.8125rem;
    color: var(--color-text-muted);
    margin-top: 12px;
  }

  .btn-lg {
    padding: 16px 32px;
    font-size: 1.0625rem;
  }

  /* Photo Grid */
  .photo-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 16px;
  }

  .photo-main {
    grid-column: span 2;
    width: 100%;
    height: 280px;
    object-fit: cover;
    border-radius: var(--radius);
  }

  .photo-secondary {
    width: 100%;
    height: 180px;
    object-fit: cover;
    border-radius: var(--radius);
  }

  /* Features */
  .features {
    padding: 80px 0;
  }

  .section-title {
    text-align: center;
    margin-bottom: 12px;
  }

  .section-subtitle {
    text-align: center;
    color: var(--color-text-muted);
    margin-bottom: 48px;
  }

  .features-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 24px;
  }

  .feature-card {
    position: relative;
  }

  .feature-badge {
    display: inline-block;
    padding: 3px 8px;
    border-radius: 4px;
    font-size: 0.65rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.03em;
    margin-bottom: 10px;
  }

  .feature-badge.mvp {
    background: var(--color-primary-bg);
    color: var(--color-primary-dark);
  }

  .feature-badge.roadmap {
    background: #FEF3C7;
    color: #92400E;
  }

  .feature-icon {
    font-size: 2rem;
    margin-bottom: 12px;
  }

  .feature-card h3 {
    font-size: 1rem;
    margin-bottom: 8px;
  }

  .feature-card p {
    font-size: 0.875rem;
    margin: 0;
  }

  /* Form Section */
  .form-section {
    padding: 80px 0;
    background: var(--color-bg-alt);
  }

  .form-wrapper {
    max-width: 600px;
    margin: 0 auto;
    background: white;
    border-radius: var(--radius);
    padding: 40px;
    box-shadow: var(--shadow-lg);
  }

  .form-header {
    text-align: center;
    margin-bottom: 32px;
  }

  .form-header h2 {
    margin-bottom: 8px;
  }

  .form-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin-bottom: 20px;
  }

  .form-group {
    display: flex;
    flex-direction: column;
  }

  .form-group.full-width {
    grid-column: span 2;
  }

  .checkbox-group {
    margin-bottom: 24px;
  }

  .checkbox-label {
    display: flex;
    align-items: flex-start;
    gap: 10px;
    font-size: 0.875rem;
    color: var(--color-text-muted);
    cursor: pointer;
  }

  .checkbox-label input {
    width: auto;
    margin-top: 3px;
  }

  .full-width {
    width: 100%;
  }

  .form-success {
    text-align: center;
    padding: 40px;
  }

  .success-icon {
    font-size: 3rem;
    margin-bottom: 16px;
  }

  /* FAQ */
  .faq-section {
    padding: 80px 0;
  }

  .faq-list {
    margin-top: 40px;
  }

  .faq-item {
    padding: 24px 0;
    border-bottom: 1px solid var(--color-border);
  }

  .faq-item:last-child {
    border-bottom: none;
  }

  .faq-item h4 {
    margin-bottom: 8px;
    font-size: 1.0625rem;
  }

  .faq-item p {
    margin: 0;
    color: var(--color-text-muted);
  }

  /* Responsive */
  @media (max-width: 968px) {
    .hero-grid {
      grid-template-columns: 1fr;
      gap: 40px;
    }

    .hero h1 {
      font-size: 2.25rem;
    }

    .hero-features {
      flex-wrap: wrap;
    }

    .features-grid {
      grid-template-columns: 1fr;
    }

    .form-grid {
      grid-template-columns: 1fr;
    }

    .form-group.full-width {
      grid-column: span 1;
    }
  }
</style>

<script>
  // Form submission
  const form = document.getElementById('registro-form');
  const formSuccess = document.getElementById('form-success');
  
  form?.addEventListener('submit', async (e) => {
    e.preventDefault();
    
    const formData = new FormData(form as HTMLFormElement);
    const data = Object.fromEntries(formData.entries());
    
    // TODO: Reemplazar con tu webhook de Make.com
    const WEBHOOK_URL = 'YOUR_WEBHOOK_URL_HERE';
    
    try {
      // Descomentar cuando tengas el webhook configurado:
      // await fetch(WEBHOOK_URL, {
      //   method: 'POST',
      //   headers: { 'Content-Type': 'application/json' },
      //   body: JSON.stringify(data)
      // });
      
      // Por ahora, solo mostramos el √©xito
      console.log('Form data:', data);
      
      if (form && formSuccess) {
        form.style.display = 'none';
        formSuccess.style.display = 'block';
      }
    } catch (error) {
      console.error('Error:', error);
      alert('Hubo un error. Por favor, int√©ntalo de nuevo.');
    }
  });
</script>
